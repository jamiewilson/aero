<script on:build>
	import base from '@layouts/base'
	import { getCollection } from 'aero:content'
	const props = Aero.props

	// TODO: Build published filtering into packages/content?
	const docs = (await getCollection('docs'))
		.filter(doc => doc.data.published)
</script>

<base-layout title="Docs">
	<header>
		<h1>Docs</h1>
		<p class="secondary">
			Pages loaded from
			<code>client/content/docs</code>
		</p>
	</header>

	<ul class="card">
		<li each="{doc in docs}">
			<a href="/docs/{doc.id}">{doc.data.title}</a>
			<p if="{ doc.data.subtitle }">{doc.data.subtitle}</p>
		</li>
		<style>
			@scope {
				:scope {
					list-style-type: none;
					max-width: 50ch;
					text-align: left;

					> *:not(:last-of-type) {
						margin-block-end: 2rem;
					}
				}
			}
		</style>
	</ul>
</base-layout>
