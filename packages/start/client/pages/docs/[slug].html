<script is:build>
	import base from '@layouts/base'
	import badge from '@components/badge'
	import { getCollection, render } from 'aero:content'

	export async function getStaticPaths() {
		const docs = await getCollection('docs')
		return docs.map(doc => ({ params: { slug: doc.id }, props: doc }))
	}

	const doc = Aero.props
	const { html } = await render(doc)
</script>

<base-layout title="{doc.data.title}">
	<article class="prose">
		<a href="/docs">‚Üê All docs</a>
		<header>
			<badge-component if="{!doc.data.published}" text="Draft" />
			<h1>{doc.data.title}</h1>
			<p class="secondary">{doc.data.subtitle}</p>
			<hr />
		</header>
		<section>{html}</section>
	</article>
</base-layout>
