<script on:build>
	const dismiss = el => setTimeout(() => el.replaceChildren(), 3000)
</script>

<!-- Alpine x-data & @htmx:after-swap example -->
<section x-data="{ input: '', dismiss: ${dismiss} }">
	<p>Test the server:</p>
	<form
		hx-post="/api/submit"
		hx-on::after-request="if (event.detail.successful) this.reset()"
		hx-target="[hx-toast]"
		hx-swap="innerHTML">
		<input x-model="input" type="text" name="message" placeholder="Enter a message" />
		<button type="submit" :disabled="!input.length">{ site.home.cta }</button>
	</form>

	<span class="toast" hx-toast @htmx:after-swap="dismiss($el)"></span>

	<style>
		@scope {
			:scope {
				margin-block-start: 10vmin;
			}

			p {
				font-size: smaller;
			}

			form {
				margin-bottom: 1rem;
			}
		}
	</style>
</section>
