<script is:build>
	import base from '@layouts/base'
	import badge from '@components/badge'
	import { getCollection } from 'aero:content'

	const props = Aero.props
	const docs = await getCollection('docs')
		.sort((a, b) => b.data.published - a.data.published)
</script>

<base-layout title="Docs">
	<header>
		<h1>Docs</h1>
		<p class="secondary">
			Pages loaded from
			<code>client/content/docs</code>
		</p>
	</header>

	<ul class="card">
		<li each="{doc in docs}">
			<a href="/docs/{doc.id}">{doc.data.title}</a>
			<badge-component if="{!doc.data.published}" text="Draft" />
			<p>{doc.data.subtitle}</p>
		</li>
		<style>
			@scope {
				:scope {
					list-style-type: none;
					max-width: 50ch;
					text-align: left;

					> *:not(:last-of-type) {
						margin-block-end: 2rem;
					}
				}
			}
		</style>
	</ul>
</base-layout>
